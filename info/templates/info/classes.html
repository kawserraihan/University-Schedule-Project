{% extends 'info/base.html' %}
{% block content %}
    

{% load static %}


    
      <div class="page-header">
        <h3 class="page-title">
          <span class="page-title-icon bg-gradient-primary text-white me-2">
            <i class="mdi mdi-calendar-multiple-check"></i>
          </span> Class Details
        </h3>
      </div>
      <div class="row">
        <div class="col-lg-12 grid-margin stretch-card">
          <div class="card">
            <div class="card-body">
              <div class="row">
              <div class="col-md-4">

                <form>
                  {% if departmentId and batchId and sectionId %}
                    <a href="{% url 'add_class' request.user.teacher.id departmentId batchId sectionId %}" class="btn btn-gradient-primary btn-fw">Add</a>
                  {% else %}
                    <a href="{% url 'add_class_without_params' request.user.teacher.id %}" class="btn btn-gradient-primary btn-fw">Add</a>
                  {% endif %}
                </form>
          </div>
          <div class="col-md-4">
            <div class="form-group" >
               <div id="day-filter-container"
              data-teacher="{{ request.user.teacher.id }}"
              data-department="{{ departmentId }}"
              data-batch="{{ batchId }}"
              data-section="{{ sectionId }}">
              <label for="day-filter">Filter by Day:</label>
              <select name="day" id="day-filter" class="form-control">
                  <option value="">Select a Day</option>
                  <option value="">All Days</option>
                  <option value="Monday">Monday</option>
                  <option value="Tuesday">Tuesday</option>
                  <option value="Wednesday">Wednesday</option>
                  <option value="Thursday">Thursday</option>
                  <option value="Friday">Friday</option>
                  <option value="Saturday">Saturday</option>
                  <option value="Sunday">Sunday</option>
              </select>
            </div>
          </div>
        </div>
      </div>

              <div class="table-responsive">
              <table class="table table-hover">
                <thead>
                  <tr>
                    <th>No.</th>
                    <th>Department</th>
                    <th>Batch</th>
                    <th>Section</th>
                    <th>Day</th>
                    <th>Subject</th>
                    <th>Class Start</th>
                    <th>Class End</th>
                    <th>Room No.</th>
                    <th>Teacher</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  {% for class_detail in class_details %}
                  <tr>

                    <td>{{ forloop.counter }}</td>
                    <td>{{ class_detail.department }}</td>
                    <td>{{ class_detail.batch }}</td>
                    <td>{{ class_detail.section }}</td>
                    <td>{{ class_detail.day }}</td>
                    <td>{{ class_detail.classSubject }}</td>
                    <td>{{ class_detail.classStart }}</td>
                    <td>{{ class_detail.classEnd }}</td>
                    <td>{{ class_detail.classRoom }}</td>
                    <td>{{ class_detail.teacherInit }}</td>
                    <td class="action-buttons">
                      <a href="{% url 'view_class' teacher_id=request.user.teacher.id class_id=class_detail.id %}">
                        <img src="{% static 'assets/images/actions/view.png' %}" alt="Student Companion" /></a>
                      <a href="{% url 'edit_class' teacher_id=request.user.teacher.id class_id=class_detail.id %}">
                        <img src="{% static 'assets/images/actions/edit.png' %}" alt="Student Companion"/></a>
                      <a href="{% url 'delete_class' teacher_id=request.user.teacher.id class_id=class_detail.id %}">
                      <img src="{% static 'assets/images/actions/trash.png' %}" alt="Student Companion" /></a>


                    </td>
                  </tr>
                  {% endfor %}
                </tbody>
              </table>
            </div>
            </div>
          </div>
        </div>
      </div>

      <script>
        $(document).ready(function() {
          var dayFilterContainer = $('#day-filter-container');
          var teacherId = dayFilterContainer.data('teacher');
          var departmentId = dayFilterContainer.data('department');
          var batchId = dayFilterContainer.data('batch');
          var sectionId = dayFilterContainer.data('section');
      
          $('#day-filter').on('change', function() {
            var selectedDay = $(this).val();
            var url = `/teacher/${teacherId}/classes/${departmentId}/${batchId}/${sectionId}/`;
      
            if (selectedDay) {
              // Append the selected day to the URL if it's not empty
              url += `?day=${selectedDay}`;
            }
      
            // Redirect to the filtered classes page
            window.location.href = url;
          });
        });
      </script>


    
  
  <!-- main-panel ends -->



{% endblock %}
